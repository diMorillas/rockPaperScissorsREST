<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Piedra, Papel o Tijeras</title>
    <link href="styles.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Exa:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gGZnENcDprfD8DrM9x1BZwBI/3wQlOjP5oZpuEoh5H5D6xZVl3Jn7JkcmWBP1kv+" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
</head>

<body class="text-center py-5 bg-photo1" id="body-bg">



    <!--Botones Navegador Inicio-->
    <div id="muteButton" class="position-absolute top-0 start-0 p-2 bg-light border-bottom w-100">
        <button class="btn btn-light btn-sm opacidad">🔊</button>
        <button class="btn btn-light btn-sm opacidad" id="mostrarAjustes">⚙️</button>
    </div>

    <!--Botones Navegador Fin-->


    <!--Panel de Ajustes Background Inicio-->
    <div class="container-ajustes" id="container-ajustes">
        <h1 style="text-align: center; margin-top: 50px;">Cambiar Fondo De Pantalla: <span
                id="siguiente-ajustes">▶️</span></h1>
        <br><br><br>
        <div class="images-container">
            <img src="./img/background.png" class="background-img" id="img1">
            <img src="./img/background2.png" class="background-img" id="img2">
            <img src="./img/background3.jpg" class="background-img" id="img3">
            <img src="./img/background4.webp" class="background-img" id="img4">
        </div>
        <button class="cerrarAjustes" id="cerrarAjustes" style="background-color: #00A6ED;">Cerrar</button>
    </div>
    <!--Panel de Ajustes Background Fin-->

    <!--Panel de Ajustes Sonido Inicio-->
    <div class="container-ajustes-sonido" id="container-ajustes-sonido" style="display: none;">
        <h1 style="text-align: center; margin-top: 50px;"><span id="atras-ajustes">◀️</span>Cambiar Sonido De Pantalla:
        </h1>
        <br><br><br>
        <div class="images-container-ajustes" style="text-align: center;">
            <button class="boton-sonido">I have no enemies</button>
            <br>
            <button class="boton-sonido">I really want to stay at your home</button>
            <br>
            <button class="boton-sonido">Dandadan Op</button>
            <br>
            <button class="boton-sonido">Sonne - Lofi Version</button>
        </div>
    </div>
    <!--Panel de Ajustes Sonido Fin-->


    <!--Contenedor Inicio-->
    <div class="container">
        <h1 class="mb-4 text-primary">Juego de Piedra, Papel o Tijeras</h1>
        <div class="mb-3">
            <label for="partidaIdInput" class="form-label">ID de la partida:</label>
            <div class="input-group">
                <input type="text" id="partidaIdInput" class="form-control" placeholder="Ingresa el ID de la partida"
                    style="text-align: center;">
                <button id="crearPartidaBtn" class="btn btn-primary">Crear Partida</button>
            </div>
        </div>
        <div class="mb-3">
            <p><strong>Partida ID:</strong> <span id="partidaId" class="text-secondary"><i>ninguna</i></span></p>
            <p><strong>Puntuaciones:</strong> <span id="puntuacion" class="text-secondary"><i>ninguna</i></span></p>
        </div>
        <p id="resultado" class="text-success fw-bold"></p>

        <div id="controlesPartida" class="row justify-content-center mt-4" style="display: none;">
            <div class="col-12 col-md-6">
                <div class="card border-primary mb-3" id="jugador1">
                    <hr>
                    <div class="card-header bg-primary text-white jugadorTexto">Jugador 1</div>
                    <br>
                    <div class="card-body">
                        <button class="btn btn-outline-dark tiradaBtn btnElemento" data-jugador="1"
                            data-tirada="piedra">🪨</button>
                        <button class="btn btn-outline-dark tiradaBtn btnElemento" data-jugador="1"
                            data-tirada="papel">🗒️</button>
                        <button class="btn btn-outline-dark tiradaBtn btnElemento" data-jugador="1"
                            data-tirada="tijeras">✂️</button>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-6">
                <div class="card border-danger mb-3" id="jugador2">
                    <hr>
                    <div class="card-header bg-danger text-white jugadorTexto">Jugador 2</div>
                    <br>
                    <div class="card-body">
                        <button class="btn btn-outline-dark tiradaBtn btnElemento" data-jugador="2"
                            data-tirada="piedra">🪨</button>
                        <button class="btn btn-outline-dark tiradaBtn btnElemento" data-jugador="2"
                            data-tirada="papel">🗒️</button>
                        <button class="btn btn-outline-dark tiradaBtn btnElemento" data-jugador="2"
                            data-tirada="tijeras">✂️</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Contenedor Fin-->

    <!--Audio Inicio-->
    <audio id="audio1" src="./audio/no_enemies.mp3"></audio>
    <audio id="audio2" src="./audio/cyberpunk.mp3"></audio>
    <audio id="audio3" src="./audio/dandadan.mp3"></audio>
    <audio id="audio4" src="./audio/sonne.mp3"></audio>
    <!--Audio Fin-->

    <script src="script.js"></script> <!--Lógica Juego-->

    <!--Lógica Sonido Inicio-->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const audios = {
                "I have no enemies": document.getElementById('audio1'),
                "I really want to stay at your home": document.getElementById('audio2'),
                "Dandadan Op": document.getElementById('audio3'),
                "Im still standing": document.getElementById('audio4')
            };

            let currentAudio = audios["I have no enemies"]; // Audio por defecto
            const muteButton = document.querySelector("#muteButton button");
            const soundButtons = document.querySelectorAll(".boton-sonido");

            // Reproducir audio por defecto al cargar
            const playAudio = () => {
                currentAudio.play().catch((error) => {
                    console.warn("Reproducción automática bloqueada:", error);
                });
            };

            playAudio();

            // Si el navegador bloquea la reproducción, activar con un clic
            document.body.addEventListener(
                "click",
                () => {
                    playAudio();
                },
                { once: true }
            );

            // Manejador para el botón de mute
            muteButton.addEventListener("click", () => {
                if (currentAudio.muted) {
                    currentAudio.muted = false;
                    muteButton.textContent = "🔊";
                } else {
                    currentAudio.muted = true;
                    muteButton.textContent = "🔇";
                }
            });

            // Cambiar audio según el botón presionado
            soundButtons.forEach((button) => {
                button.addEventListener("click", () => {
                    const selectedAudio = audios[button.textContent];
                    if (selectedAudio && selectedAudio !== currentAudio) {
                        // Detener el audio actual
                        currentAudio.pause();
                        currentAudio.currentTime = 0;

                        // Reproducir el nuevo audio
                        currentAudio = selectedAudio;
                        currentAudio.play();
                    }
                });
            });
        });
    </script>

    <!--Lógica Sonido Fin-->

    <!--Panel de control Inicio-->
    <script>
        // Función para esconder ajustes
        let container = document.getElementById('container-ajustes');
        const esconderAjustes = () => {
            let boton = document.querySelector('#cerrarAjustes');
            boton.addEventListener('click', () => {
                container.style.display = 'none';
            });
        };
        esconderAjustes();

        // Función para volver a mostrar
        let mostrar = document.getElementById('mostrarAjustes');
        const mostrarAjustes = () => {
            mostrar.addEventListener('click', () => {
                container.style.display = 'block';
            });
        };
        mostrarAjustes();

        // Función para pasar a ajustes de sonido
        let containerSonidoAjustes = document.getElementById('container-ajustes-sonido'); // Ajuste aquí
        let siguiente = document.getElementById('siguiente-ajustes');
        const siguienteSonido = () => {
            siguiente.addEventListener('click', () => {
                container.style.display = 'none';
                containerSonidoAjustes.style.display = 'block'; // Mostrar el contenedor correcto
            });
        };
        siguienteSonido();
    </script>

    <!--Panel de control Fin-->

    <!--Panel de control sonido Inicio-->
    <script>
        let containerSonido = document.getElementById('container-ajustes-sonido');
        let containerAjustes = document.getElementById('container-ajustes');
        let atras = document.getElementById('atras-ajustes');

        const esconderAjustesSonido = () => {
            atras.addEventListener('click', () => {
                containerSonido.style.display = 'none';
                containerAjustes.style.display = 'block';
            })
        }

        esconderAjustesSonido();

    </script>
    <!--Panel de control sonido Fin-->

    <!--Control de Fondo De Pantalla Inicio-->
    <script>
        let imagen1 = document.getElementById('img1');
        let imagen2 = document.getElementById('img2');
        let imagen3 = document.getElementById('img3');
        let imagen4 = document.getElementById('img4');

        let fondo = document.getElementById('body-bg');

        img1.addEventListener('click', () => {
            fondo.classList.remove('bg-photo1');
            fondo.classList.remove('bg-photo2');
            fondo.classList.remove('bg-photo3');
            fondo.classList.remove('bg-photo4');
            fondo.classList.add('bg-photo1');
        })


        img2.addEventListener('click', () => {
            fondo.classList.remove('bg-photo1');
            fondo.classList.remove('bg-photo2');
            fondo.classList.remove('bg-photo3');
            fondo.classList.remove('bg-photo4');
            fondo.classList.add('bg-photo2');
        })

        img3.addEventListener('click', () => {
            fondo.classList.remove('bg-photo1');
            fondo.classList.remove('bg-photo2');
            fondo.classList.remove('bg-photo3');
            fondo.classList.remove('bg-photo4');
            fondo.classList.add('bg-photo3');
        })

        img4.addEventListener('click', () => {
            fondo.classList.remove('bg-photo1');
            fondo.classList.remove('bg-photo2');
            fondo.classList.remove('bg-photo3');
            fondo.classList.remove('bg-photo4');
            fondo.classList.add('bg-photo4');
        })
    </script>
    <!--Control de Fondo De Pantalla Fin-->
</body>

</html>